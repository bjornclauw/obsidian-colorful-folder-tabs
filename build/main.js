/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var f=Object.defineProperty;var E=Object.getOwnPropertyDescriptor;var S=Object.getOwnPropertyNames;var x=Object.prototype.hasOwnProperty;var w=(l,s)=>{for(var e in s)f(l,e,{get:s[e],enumerable:!0})},T=(l,s,e,n)=>{if(s&&typeof s=="object"||typeof s=="function")for(let t of S(s))!x.call(l,t)&&t!==e&&f(l,t,{get:()=>s[t],enumerable:!(n=E(s,t))||n.enumerable});return l};var D=l=>T(f({},"__esModule",{value:!0}),l);var M={};w(M,{default:()=>h});module.exports=D(M);var r=require("obsidian");var v={enabled:!0,mappings:[{name:"Projects",color:"#e74c3c"},{name:"Design",color:"#3498db"}]},h=class extends r.Plugin{constructor(){super(...arguments);this.settings=v;this.observer=null}async onload(){this.settings=Object.assign({},v,await this.loadData()),console.log("FolderColorPlugin loaded",this.settings),this.settings.enabled&&this.addStyles(),this.addSettingTab(new y(this.app,this)),this.addCommand({id:"toggle-folder-colors",name:"Toggle folder colors",callback:async()=>{this.settings.enabled=!this.settings.enabled,await this.saveData(this.settings),this.settings.enabled?this.addStyles():this.removeStyles()}})}onunload(){this.removeStyles(),console.log("FolderColorPlugin unloaded")}addStyles(){this.applyMappingsToDOM(),this.setupObserver()}removeStyles(){this.observer&&(this.observer.disconnect(),this.observer=null),this.clearInlineMappings()}applyMappingsToDOM(){let e=this.settings.mappings||[];if(!e.length)return;Array.from(document.querySelectorAll('.workspace-leaf-content[data-type="file-explorer"] .nav-files-container .tree-item.nav-folder .nav-folder-title')).forEach(t=>{var d;let p=((d=t.textContent)==null?void 0:d.trim())||"",o=e.find(i=>i.name===p),c=t.closest(".tree-item.nav-folder");o&&c&&(c.style.setProperty("--tab-color",o.color),t.style.setProperty("--tab-color",o.color))})}clearInlineMappings(){Array.from(document.querySelectorAll('.workspace-leaf-content[data-type="file-explorer"] .nav-files-container .tree-item.nav-folder')).forEach(t=>{t.style.removeProperty("--tab-color")}),Array.from(document.querySelectorAll('.workspace-leaf-content[data-type="file-explorer"] .nav-files-container .tree-item.nav-folder .nav-folder-title')).forEach(t=>t.style.removeProperty("--tab-color"))}setupObserver(){if(this.observer)return;let e=document.querySelector('.workspace-leaf-content[data-type="file-explorer"] .nav-files-container');e&&(this.observer=new MutationObserver(()=>{setTimeout(()=>this.applyMappingsToDOM(),50)}),this.observer.observe(e,{childList:!0,subtree:!0}))}},y=class extends r.PluginSettingTab{constructor(e,n){super(e,n);this.plugin=n}display(){let{containerEl:e}=this;e.empty(),e.createEl("h2",{text:"Folder Color settings"}),new r.Setting(e).setName("Enable folder colors").setDesc("Toggle the folder color styling in the file explorer").addToggle(i=>i.setValue(this.plugin.settings.enabled).onChange(async a=>{this.plugin.settings.enabled=a,await this.plugin.saveData(this.plugin.settings),a?this.plugin.addStyles():this.plugin.removeStyles()})),e.createEl("h3",{text:"Folder \u2192 Color mappings"});let n=e.createDiv({cls:"folder-color-list"}),t=this.plugin.settings.mappings||[];t.forEach((i,a)=>{let g=n.createDiv({cls:"folder-mapping-row"});g.createEl("label",{text:"Folder name",cls:"mapping-label"});let u=g.createEl("input",{attr:{type:"text",placeholder:"Folder name",value:i.name}});u.style.marginRight="8px",u.onchange=async()=>{t[a].name=u.value.trim(),await this.plugin.saveData(this.plugin.settings),this.plugin.addStyles(),this.display()},g.createEl("label",{text:"Color",cls:"mapping-label"});let m=g.createEl("input",{attr:{type:"color",value:i.color||"#ff0000"}});m.style.marginRight="8px",m.onchange=async()=>{t[a].color=m.value,await this.plugin.saveData(this.plugin.settings),this.plugin.addStyles()};let b=g.createEl("button",{text:"Remove"});b.onclick=async()=>{t.splice(a,1),await this.plugin.saveData(this.plugin.settings),this.plugin.addStyles(),this.display()}}),e.createEl("h4",{text:"Add mapping"});let p=e.createDiv({cls:"folder-mapping-add"}),o=p.createEl("input",{attr:{type:"text",placeholder:"Folder name"}});o.style.marginRight="8px";let c=p.createEl("input",{attr:{type:"color",value:"#ff0000"}});c.style.marginRight="8px";let d=p.createEl("button",{text:"Add"});d.onclick=async()=>{let i=(o.value||"").trim(),a=c.value||"#ffffff";i&&(this.plugin.settings.mappings=this.plugin.settings.mappings||[],this.plugin.settings.mappings.push({name:i,color:a}),await this.plugin.saveData(this.plugin.settings),this.plugin.addStyles(),this.display())}}};
